# LoRa 통신 프로젝트 (USB to TTL + EBYTE E220-900T22D)

이 프로젝트는 **USB to TTL 변환기와 EBYTE E220-900T22D LoRa 모듈**을 사용하여 무선 통신을 성공적으로 구현한 과정입니다.  
송신부에서 **HEX 데이터를 전송**하고, 수신부에서 이를 정상적으로 수신하는 과정을 기록했습니다.

---

## 📋 프로젝트 개요
- **LoRa 모듈**: EBYTE E220-900T22D  
- **통신 방식**: UART (9600 bps)  
- **변환기**: USB to TTL 변환기  
- **송수신 데이터 포맷**: HEX 값 기반 데이터 패킷  

---

## 🚀 진행 과정

### 1. 하드웨어 연결
**USB to TTL 변환기**와 **E220-900T22D LoRa 모듈**을 다음과 같이 연결했습니다:

| USB to TTL 핀 | E220 LoRa 모듈 핀 |
|---------------|-------------------|
| TX            | RXD               |
| RX            | TXD               |
| GND           | GND               |
| VCC (3.3V)    | VCC (3.3V)        |

- **M0, M1 핀 설정:** Normal 모드로 설정  
  - M0 → GND  
  - M1 → GND  

### 2. RF 설정 (Ebyte RF 설정 프로그램)
**Ebyte RF 설정 프로그램(E22 V3.3)**을 사용하여 송신부와 수신부의 RF 설정을 다음과 같이 구성했습니다:

#### **송신부 설정**
- **Baud Rate:** 9600 bps  
- **Channel:** 68  
- **Address:** 1  
- **Air Rate:** 0.3 kbps  
- **WOR Role:** Transmit (Normal 모드)  

#### **수신부 설정**
- **Baud Rate:** 9600 bps  
- **Channel:** 68  
- **Address:** 2  
- **Air Rate:** 0.3 kbps  
- **WOR Role:** Receive (500ms 대기)

---

### 3. 송신부에서 데이터 전송
송신부 PC에서 **HEX 값**을 다음과 같이 전송했습니다:
00 02 04 48 49


- **데이터 구성:**  
  - **`00`:** 패킷 헤더  
  - **`02`:** 수신부 주소  
  - **`04`:** 데이터 길이 (4바이트)  
  - **`48 49`:** ASCII로 변환하면 "HI" (Hello를 줄인 메시지)

송신부 프로그램 예시(예를 들어 **Hercules**나 **터미널 프로그램** 사용 가능):
1. **송신 모드로 전환**
2. **HEX 데이터 입력 및 전송**

---

### 4. 수신부에서 데이터 수신
수신부에서 **터미널 프로그램**을 사용하여 LoRa 모듈로부터 데이터를 수신했습니다:
- 수신된 데이터:


- **해석:**  
- **헤더(00)**, **주소(02)**, **데이터 길이(04)**, **데이터("HI")**가 정확히 수신됨.

---

## ✅ **성공적 통신 확인**
송신부에서 보낸 HEX 값이 수신부에서 정확히 수신되어 **LoRa 통신이 정상적으로 작동**하는 것을 확인했습니다.

---

## 📖 **향후 개선 및 확장**
1. **CRC 검증 추가:** 데이터의 무결성을 검증하기 위해 CRC(체크섬)를 패킷에 포함하는 기능 추가.
2. **센서 데이터 송수신:** 단순 메시지뿐만 아니라 **센서 데이터를 송신하고 이를 수신부에서 처리하는 기능** 구현.
3. **WOR(저전력 모드) 테스트:** 수신부가 저전력 모드에서 작동하도록 WOR 주기를 조정하여 배터리 소모 최적화.

---

## 🔧 **문제 해결 과정**
- 초기 설정에서 LoRa 모듈의 RF 설정이 제대로 저장되지 않는 문제를 겪었으나, **정확한 설정 절차(`Set Param → Param Save`)**를 거쳐 해결했습니다.
- 송신부에서 데이터 형식을 HEX 값으로 변환하여 **통신 성공**을 확인했습니다.

---

## 📂 **폴더 구조**
```plaintext
/
├── README.md          # 프로젝트 개요 및 과정
└── src/               # 송신부 및 수신부 예제 코드 (추가 가능)

